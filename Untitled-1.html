<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Title Page</title>

    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
</head>

<body style="padding-top:50px">
    <div class="container">

        <div class="row" style="padding:20px 0px !important">

            <div class="col-md-8 col-md-offset-2">

                <button type="button" class="btn btn-large btn-block btn-success create-thumbnails">Create new row of thumbnails</button>

            </div>
        </div>
        <div class="row thumbnail-container">

        </div>

    </div>


    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Bootstrap JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--Template-->
    <script type="text/template" data-template="new-list">
        <div class="col-md-8 col-md-offset-2">
            <div class="thumbnail-pack">
                <div class="col-md-4">
                    <div class="thumbnail">
                        <img data-src="#" alt="">
                        <div class="caption">
                            <h3 class="caption-title">Title</h3>
                            <p>
                                ...
                            </p>
                            <p>
                                <a href="#" class="btn btn-primary thumbnail-action">Action</a>
                                <a href="#" class="btn btn-default">Action</a>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="thumbnail">
                        <img data-src="#" alt="">
                        <div class="caption">
                            <h3 class="caption-title">Title</h3>
                            <p>
                                ...
                            </p>
                            <p>
                                <a href="#" class="btn btn-primary thumbnail-action">Action</a>
                                <a href="#" class="btn btn-default">Action</a>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="thumbnail">
                        <img data-src="#" alt="">
                        <div class="caption">
                            <h3 class="caption-title">Title</h3>
                            <p>
                                ...
                            </p>
                            <p>
                                <a href="#" class="btn btn-primary thumbnail-action">Action</a>
                                <a href="#" class="btn btn-default">Action</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <a class="btn btn-primary" data-toggle="modal" href='#modal-1'>Trigger modal 1</a>
        <a class="btn btn-primary" data-toggle="modal" href='#modal-2'>Trigger modal 2</a>
        <div class="modal fade" id="modal-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Modal 1</h4>
                    </div>
                    <div class="modal-body">

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modal-2">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Modal 2</h4>
                    </div>
                    <div class="modal-body">
                        Cupidatat eiusmod irure adipisicing quis nostrud pariatur. Velit sint aute incididunt quis aliqua in do elit. Esse reprehenderit
                        excepteur velit incididunt eiusmod elit qui culpa dolor enim pariatur cupidatat id cupidatat. Id
                        occaecat irure enim ipsum esse. Proident sunt mollit excepteur voluptate ex. Nulla et ea amet sunt
                        consectetur anim anim. Dolore esse consequat laborum commodo ad qui officia quis duis eiusmod.Quis
                        excepteur esse eu commodo eiusmod ea non pariatur aliqua. Et exercitation anim excepteur ullamco
                        et sunt nulla dolore commodo ipsum officia. Quis aliqua occaecat proident nostrud non aliquip dolor
                        eu. Sint tempor aliqua id fugiat nulla ut culpa. Amet velit reprehenderit consectetur in eu.Eiusmod
                        qui sint ipsum esse qui. Veniam consequat velit sunt do occaecat nulla aute excepteur reprehenderit
                        pariatur consequat. Est voluptate et anim mollit anim elit occaecat elit minim velit consequat nisi
                        ullamco. Lorem cillum non cupidatat minim tempor id veniam nostrud. Fugiat ut commodo nisi quis excepteur
                        labore nostrud et.Esse do eu proident sit in. Qui proident irure culpa deserunt fugiat Lorem. Ea
                        deserunt consectetur proident excepteur sunt pariatur pariatur elit qui minim veniam reprehenderit
                        velit. Occaecat elit non consectetur dolore nostrud.Cupidatat officia officia velit minim sunt pariatur
                        labore ut anim elit esse. Mollit incididunt laboris quis do non. Aliqua culpa pariatur sunt deserunt
                        consectetur. Consequat voluptate veniam adipisicing magna ipsum nostrud excepteur eiusmod laboris
                        excepteur tempor ut. Sit id enim est esse non laborum labore.Tempor officia Lorem excepteur adipisicing
                        ex dolor deserunt consequat est sunt et sunt. Sit est aliqua incididunt id pariatur sunt. Velit minim
                        labore tempor excepteur tempor in qui amet magna dolore cupidatat voluptate. Eiusmod dolor sunt veniam
                        irure non cillum ullamco aute do aliqua in tempor. Duis mollit officia qui incididunt aliquip do
                        aliquip officia.Sunt quis do minim et Lorem esse officia proident nulla in nostrud ipsum qui ipsum.
                        Non voluptate amet eu sit id do duis voluptate eiusmod qui esse quis exercitation. Ea exercitation
                        magna adipisicing veniam cupidatat ipsum sit anim commodo reprehenderit amet. Incididunt non qui
                        ipsum aliqua mollit dolore dolore.
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>

    </script>
    <script>
        $(document).ready(function () {
            function getThumbPackLength() {
                var counter = $('.thumbnail-pack').length;
                return counter;
            }

            function addCaptionDetails() {
                if (getThumbPackLength() === 1) {
                    $('.thumbnail>.caption>.caption-title').each(function (index, element) {
                        $(element).text('Thumbnail ' + index);
                    });
                } else {
                    var thumbnailCaptionLen = $('.thumbnail>.caption>.caption-title').length;
                    console.log($('.thumbnail>.caption>.caption-title').eq(thumbnailCaptionLen - 1).index() +
                        " " +
                        $('.thumbnail>.caption>.caption-title').eq(thumbnailCaptionLen - 2).index() + " " +
                        $('.thumbnail>.caption>.caption-title').eq(thumbnailCaptionLen - 3).index());
                }

            }
            $(".create-thumbnails").on('click', function (event) {
                event.preventDefault();
                $('.thumbnail-container').append(jQuery.parseHTML($('script[data-template=new-list]').text()));
                $(this).trigger("add:captionTitle");
            })
            $(".container").on('add:captionTitle', function (e) {
                addCaptionDetails();
                //$('.thumbnail>.caption>.caption-title').eq(0).text('change');
            });
            $(".container").on('click', '.thumbnail-action', function () {
                console.log($(this).index());
            })
        });
    </script>
</body>
</body>

</html>